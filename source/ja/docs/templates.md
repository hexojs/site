---
title: テンプレート
---
テンプレートは、ウェブサイトのプレゼンテーションを定義します。それは各ページがどのように見えるべきかを記述します。下記の表は、利用可能な各ページに対応するテンプレートを示しています。最低限、テーマには`index`テンプレートが含まれているべきです。

テンプレート | ページ | フォールバック
--- | --- | ---
`index` | ホームページ |
`post` | 投稿 | `index`
`page` | ページ | `index`
`archive` | アーカイブ | `index`
`category` | カテゴリーアーカイブ | `archive`
`tag` | タグアーカイブ | `archive`

## レイアウト

ページが類似の構造を共有する場合（例えば、二つのテンプレートがヘッダーとフッターを持つ場合）、これらの構造上の類似性を宣言するために`layout`を使用することができます。すべてのレイアウトファイルには、該当するテンプレートの内容を表示するための`body`変数を含めるべきです。例えば:

``` html index.ejs
index
```

``` html layout.ejs
<!DOCTYPE html>
<html>
  <body><%- body %></body>
</html>
```

は次のようになります:

``` html
<!DOCTYPE html>
<html>
  <body>index</body>
</html>
```

デフォルトでは、`layout`テンプレートは他のすべてのテンプレートによって使用されます。Front Matterや設定で`false`に設定することで無効にするか、追加のレイアウトを指定することができます。トップレイアウトにさらに多くのレイアウトテンプレートを含めることで、複雑なネスト構造を構築することも可能です。

## パーシャル

テンプレート間でコンポーネントを共有する場合に、パーシャルが役立ちます。典型的な例には、ヘッダー、フッター、サイドバーなどがあります。ウェブサイトのメンテナンスを大幅に便利にするために、パーシャルを別のファイルに置くことができます。例えば:

``` html partial/header.ejs
<h1 id="logo"><%= config.title %></h1>
```

``` html index.ejs
<%- partial('partial/header') %>
<div id="content">ホームページ</div>
```

は次のようになります:

``` html
<h1 id="logo">マイサイト</h1>
<div id="content">ホームページ</div>
```

## ローカル変数

テンプレート内でローカル変数を定義し、他のテンプレートで使用することができます。

``` html partial/header.ejs
<h1 id="logo"><%= title %></h1>
```

``` html index.ejs
<%- partial('partial/header', {title: 'ハローワールド'}) %>
<div id="content">ホームページ</div>
```

は次のようになります:

``` html
<h1 id="logo">ハローワールド</h1>
<div id="content">ホームページ</div>
```

## 最適化

テーマが極端に複雑であるか、生成するファイルの数が多すぎる場合、Hexoのファイル生成性能が大幅に低下することがあります。テーマを単純化する以外に、Fragment Cachingを試すことができます。これはHexo 2.7で導入されました。

この機能は[Ruby on Rails](http://guides.rubyonrails.org/caching_with_rails.html#fragment-caching)から借用されました。それはコンテンツをフラグメントとして保存し、追加のリクエストが行われたときにキャッシュされるようにします。これにより、データベースクエリの数を減らし、ファイル生成をスピードアップすることができます。

Fragment cachingは、テンプレートからテンプレートへ変更がないと予想されるヘッダー、フッター、サイドバー、または他の静的コンテンツに最適に使用されます。例えば:

``` js
<%- fragment_cache('header', function(){
  return '<header></header>';
});
```

パーシャルを使用する方が簡単かもしれません:

``` js
<%- partial('header', {}, {cache: true});
```

{% note warn %}
`fragment_cache()`はレンダリング結果をキャッシュし、他のページにキャッシュされた結果を出力します。これは、異なるページ間で変更されることが**ない**と予想されるパーシャルにのみ使用されるべきです。そうでなければ、有効にすべき**ではありません**。
例えば、config内で`relative_link`が有効になっている場合は無効にすべきです。これは、相対リンクがページ間で異なるように見える可能性があるためです。
{% endnote %}
